<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>使用uv来更好的管理你的python依赖 - 谷中仁的博客</title><meta name=Description content="最近的总结或者思考..."><meta property="og:url" content="https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/">
<meta property="og:site_name" content="谷中仁的博客"><meta property="og:title" content="使用uv来更好的管理你的python依赖"><meta property="og:description" content="痛点 在Python 项目开发过程中，我们肯定会用到requirements.txt 来管理项目中所用到的第三方库，这么多年都是这么过来的，那有什么痛点呢？"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-30T20:43:58+08:00"><meta property="article:modified_time" content="2025-06-30T20:43:58+08:00"><meta property="og:image" content="https://guzhongren.github.io/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://guzhongren.github.io/"><meta name=twitter:title content="使用uv来更好的管理你的python依赖"><meta name=twitter:description content="痛点 在Python 项目开发过程中，我们肯定会用到requirements.txt 来管理项目中所用到的第三方库，这么多年都是这么过来的，那有什么痛点呢？"><meta name=application-name content="谷中仁的博客"><meta name=apple-mobile-web-app-title content="谷中仁的博客"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/><link rel=prev href=https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/><link rel=next href=https://guzhongren.github.io/2025/07/vibe-coding-%E4%B8%80%E4%B8%AA%E6%8F%90%E5%8D%87-code-review-comments-%E7%9A%84-vscode%E6%8F%92%E4%BB%B6/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"使用uv来更好的管理你的python依赖","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/guzhongren.github.io\/2025\/06\/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96\/"},"image":["https:\/\/guzhongren.github.io\/images\/avatar.png"],"genre":"posts","keywords":"","wordcount":1161,"url":"https:\/\/guzhongren.github.io\/2025\/06\/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96\/","datePublished":"2025-06-30T20:43:58+08:00","dateModified":"2025-06-30T20:43:58+08:00","license":"Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"guzhongren","logo":"https:\/\/guzhongren.github.io\/logo.png"},"author":{"@type":"Person","name":"谷中仁"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=谷中仁的博客><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/avatar.svg data-srcset="/images/avatar.svg, /images/avatar.svg 1.5x, /images/avatar.svg 2x" data-sizes=auto alt=/images/avatar.svg title=/images/avatar.svg>谷中仁的博客</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/ title=Tags>Tags </a><a class=menu-item href=/categories/ title=Categories>Categories </a><a class=menu-item href=/slides/ title=Slides>Slides </a><a class=menu-item href="https://www.figma.com/file/7EzjLtMRXKcaJrGEmudLwC/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1?node-id=0%3A1" title=知识图谱 rel="noopener noreffer" target=_blank>知识图谱 </a><a class=menu-item href=/about/ title=关于>关于 </a><a class=menu-item href=https://github.com/guzhongren title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i> GitHub </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=谷中仁的博客><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/avatar.svg data-srcset="/images/avatar.svg, /images/avatar.svg 1.5x, /images/avatar.svg 2x" data-sizes=auto alt=/images/avatar.svg title=/images/avatar.svg>谷中仁的博客</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title=Tags>Tags</a><a class=menu-item href=/categories/ title=Categories>Categories</a><a class=menu-item href=/slides/ title=Slides>Slides</a><a class=menu-item href="https://www.figma.com/file/7EzjLtMRXKcaJrGEmudLwC/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1?node-id=0%3A1" title=知识图谱 rel="noopener noreffer" target=_blank>知识图谱</a><a class=menu-item href=/about/ title=关于>关于</a><a class=menu-item href=https://github.com/guzhongren title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i>GitHub</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">使用uv来更好的管理你的python依赖</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://guzhongren.github.io title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>谷中仁</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/><i class="far fa-folder fa-fw" aria-hidden=true></i>Categories</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2025-06-30>2025-06-30</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 1161 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 3 分钟&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80" data-srcset="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80, https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80 1.5x, https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80 2x" data-sizes=auto alt="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80" title="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80"></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#痛点>痛点</a></li><li><a href=#工具介绍>工具介绍</a><ul><li><a href=#pyprojecttoml>pyproject.toml</a></li><li><a href=#uv>uv</a></li></ul></li><li><a href=#如何使用>如何使用</a><ul><li><a href=#生成-requirementtxt>生成 <code>requirement.txt</code></a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></div></div><div class=content id=content><h2 id=痛点>痛点</h2><p>在Python 项目开发过程中，我们肯定会用到<code>requirements.txt</code> 来管理项目中所用到的第三方库，这么多年都是这么过来的，那有什么痛点呢？</p><ul><li>你的<code>requirements.txt</code> 中是不是多了一些莫名其妙的依赖，你还不敢删除</li><li>你不知道其中的某个依赖是因为哪个依赖引入进来的，或者被哪个依赖所引用</li><li>每次运行命令生成这个文件，还得去瞅一下是不是正确，有时候，不同的人生成的顺序还不一样</li></ul><p>你是不是也是经常遇到？</p><h2 id=工具介绍>工具介绍</h2><h3 id=pyprojecttoml>pyproject.toml</h3><p><a href=https://packaging.python.org/en/latest/guides/writing-pyproject-toml/>pyproject.toml</a><sup>[1]</sup>
文件是定义项目配置的 Python 标准。</p><p>与 <code>NodeJS</code> 项目中的 <code>package.json</code> 一样，可以管理第三方依赖，可以存储可以运行的命令，所使用的 Runtime 的版本号限制和项目的基本信息等等的，功能强大可见一斑。</p><h3 id=uv>uv</h3><p><img src=https://github.com/astral-sh/uv/assets/1309177/03aa9163-1c79-4a87-a31d-7a9311ed9310#only-dark alt=uv></p><blockquote><p>An extremely fast Python package and project manager, written in Rust.(一个极快的 Python 包和项目管理器，用 Rust 编写。) &ndash; <a href=https://docs.astral.sh/uv/>https://docs.astral.sh/uv/</a><sup>[2]</sup></p></blockquote><p>速度快是其特点，但是使用也是相当方便。而且文档相当详细。</p><h2 id=如何使用>如何使用</h2><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-sh"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>mkdir py-uv
</span></span><span class=line><span class=cl><span class=nb>cd</span> py-uv/
</span></span><span class=line><span class=cl>uv init
</span></span><span class=line><span class=cl><span class=c1># Initialized project `py-uv`</span>
</span></span><span class=line><span class=cl>uv venv
</span></span><span class=line><span class=cl><span class=c1># Using CPython 3.13.2</span>
</span></span><span class=line><span class=cl><span class=c1># Creating virtual environment at: .venv</span>
</span></span><span class=line><span class=cl><span class=c1># Activate with: source .venv/bin/activate</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> .venv/bin/activate
</span></span><span class=line><span class=cl>gst
</span></span><span class=line><span class=cl><span class=c1># On branch main</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># No commits yet</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Untracked files:</span>
</span></span><span class=line><span class=cl><span class=c1>#   (use &#34;git add &lt;file&gt;...&#34; to include in what will be committed)</span>
</span></span><span class=line><span class=cl><span class=c1># 	.gitignore</span>
</span></span><span class=line><span class=cl><span class=c1># 	.python-version</span>
</span></span><span class=line><span class=cl><span class=c1># 	README.md</span>
</span></span><span class=line><span class=cl><span class=c1># 	hello.py</span>
</span></span><span class=line><span class=cl><span class=c1># 	pyproject.toml</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>#nothing added to commit but untracked files present (use &#34;git add&#34; to track)</span>
</span></span><span class=line><span class=cl>uv run hello.py
</span></span><span class=line><span class=cl><span class=c1># Using CPython 3.13.2</span>
</span></span><span class=line><span class=cl><span class=c1># Creating virtual environment at: .venv</span>
</span></span><span class=line><span class=cl><span class=c1># Hello from py-uv!</span>
</span></span><span class=line><span class=cl>uv add pyfiglet
</span></span><span class=line><span class=cl><span class=c1># Resolved 2 packages in 515ms</span>
</span></span><span class=line><span class=cl><span class=c1># Prepared 1 package in 532ms</span>
</span></span><span class=line><span class=cl><span class=c1># Installed 1 package in 7ms</span>
</span></span><span class=line><span class=cl><span class=c1>#  + pyfiglet==1.0.3</span></span></span></code></pre></div></div><p>这时，我们可以看看 <code>pyproject.toml</code> 中有哪些内容</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-toml"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>project</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;py-uv&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>version</span> <span class=p>=</span> <span class=s2>&#34;0.1.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>description</span> <span class=p>=</span> <span class=s2>&#34;Add your description here&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>readme</span> <span class=p>=</span> <span class=s2>&#34;README.md&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>requires-python</span> <span class=p>=</span> <span class=s2>&#34;&gt;=3.13&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>dependencies</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;pyfiglet&gt;=1.0.3&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div><p>可以看到 <code>pyfiglet</code> 被添加到了 <code>dependencies</code> 中；其他的内容字如其意，就不展开讲了。</p><p>在源文件中添加一点 python 代码</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-diff"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl><span class=gh>diff --git a/hello.py b/hello.py
</span></span></span><span class=line><span class=cl><span class=gh>index b18db96..204b9e3 100644
</span></span></span><span class=line><span class=cl><span class=gh></span><span class=gd>--- a/hello.py
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+++ b/hello.py
</span></span></span><span class=line><span class=cl><span class=gi></span><span class=gu>@@ -1,6 +1,12 @@
</span></span></span><span class=line><span class=cl><span class=gu></span><span class=gi>+import pyfiglet
</span></span></span><span class=line><span class=cl><span class=gi>+
</span></span></span><span class=line><span class=cl><span class=gi></span> def main():
</span></span><span class=line><span class=cl>     print(&#34;Hello from py-uv!&#34;)
</span></span><span class=line><span class=cl><span class=gi>+    ascii_art = pyfiglet.figlet_format(&#34;MyApp Started!&#34;)
</span></span></span><span class=line><span class=cl><span class=gi>+    print(ascii_art)
</span></span></span><span class=line><span class=cl><span class=gi>+
</span></span></span><span class=line><span class=cl><span class=gi></span> if __name__ == &#34;__main__&#34;:
</span></span><span class=line><span class=cl>     main()
</span></span><span class=line><span class=cl>~
</span></span></code></pre></div></div><p>再次运行</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-sh"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>uv run hello.py
</span></span><span class=line><span class=cl><span class=c1># Hello from py-uv!</span>
</span></span><span class=line><span class=cl><span class=c1>#  __  __          _                  ____  _             _           _ _</span>
</span></span><span class=line><span class=cl><span class=c1># |  \/  |_   _   / \   _ __  _ __   / ___|| |_ __ _ _ __| |_ ___  __| | |</span>
</span></span><span class=line><span class=cl><span class=c1># | |\/| | | | | / _ \ | &#39;_ \| &#39;_ \  \___ \| __/ _` | &#39;__| __/ _ \/ _` | |</span>
</span></span><span class=line><span class=cl><span class=c1># | |  | | |_| |/ ___ \| |_) | |_) |  ___) | || (_| | |  | ||  __/ (_| |_|</span>
</span></span><span class=line><span class=cl><span class=c1># |_|  |_|\__, /_/   \_\ .__/| .__/  |____/ \__\__,_|_|   \__\___|\__,_(_)</span>
</span></span><span class=line><span class=cl><span class=c1>#         |___/        |_|   |_|</span></span></span></code></pre></div></div><p>至此，我们的项目已经使用 <code>uv</code> 运行起来了，但是在真正部署的时候我们需要生成 <code>requirement.txt</code> 然后启动程序。</p><h3 id=生成-requirementtxt>生成 <code>requirement.txt</code></h3><p>在正式的开发项目中，我们不可能每个人手动生成一次，然后再提交，这样很可能忘记这个操作，最好的就是将其放在在 git hooks 中，在每次 push 代码之前生成并检查其已经存在且是最新的，这样每个人都避免了手动生成和校验。如下是一段 shell 脚本来实现该功能</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-sh"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># generate-requirements.sh</span>
</span></span><span class=line><span class=cl><span class=c1>#!/bin/basa</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -euo pipefail
</span></span><span class=line><span class=cl>uv pip compile pyproject.toml --quiet --output-file requirements.txt
</span></span><span class=line><span class=cl><span class=c1># Check for uncommitted changes</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> -n <span class=k>$(</span>git status --porcelain<span class=k>)</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Error: There are uncommitted changes. Please commit or stash them before running this script.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span></span></span></code></pre></div></div><p>然后将其集成到 <code>pre-commit</code> 中, 使其在 push 前执行这个操作</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-yaml"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>generate requirement.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Generate requirements.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>entry</span><span class=p>:</span><span class=w> </span><span class=l>./scripts/git-hooks/generate-requirements.sh</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>language</span><span class=p>:</span><span class=w> </span><span class=l>script</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>always_run</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stages</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>pre-push]</span></span></span></code></pre></div></div><p>如此可以将该流程完全自动化。</p><p>运行 <code>git push</code> 或者 <code>./scripts/git-hooks/generate-requirements.sh</code>, 会自动生成 <code>requirement.txt</code> 文件, 内容如下：</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-txt"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl># This file was autogenerated by uv via the following command:
</span></span><span class=line><span class=cl>#    uv pip compile pyproject.toml --output-file requirements.txt
</span></span><span class=line><span class=cl>pyfiglet==1.0.3
</span></span><span class=line><span class=cl>    # via py-uv (pyproject.toml)</span></span></code></pre></div></div><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>我从哪里来，我要去哪里</div></div></div><p>其中的最后一行表明，<code>pyfiglet</code> 是被 <code>py-uv</code> 这个项目依赖的，也就是我们刚创建的这个项目；而在多个依赖的项目中，生成的 <code>requirement.txt</code> 也可能出现，一个不知名的依赖被多个依赖再次依赖，这就是使用 <code>uv</code> 工具生成 <code>requirement.txt</code>的好处。</p><h2 id=总结>总结</h2><p>好的工具的选择可以为工程构建增速提效。
工具的组合更是可以产生解放生产力。</p></div><div class=references><h2>参考</h2><ol><li>pyproject.toml: <a href=https://packaging.python.org/en/latest/guides/writing-pyproject-toml/ target=_blank rel="noopener noreferrer">https://packaging.python.org/en/latest/guides/writing-pyproject-toml/</a></li><li>https://docs.astral.sh/uv/: <a href=https://docs.astral.sh/uv/ target=_blank rel="noopener noreferrer">https://docs.astral.sh/uv/</a></li></ol></div><div class=disclaimer><h2>免责声明</h2><p>本文仅代表个人观点，与本人所供职的公司无任何关系。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2025-06-30</span></div><div class=post-info-license><span><a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc/4.0/80x15.png></a></span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 X" data-sharer=x data-url=https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/ data-title=使用uv来更好的管理你的python依赖 data-via=guzhongren data-hashtags><i class="fab fa-x-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Threads" data-sharer=threads data-url=https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/ data-title=使用uv来更好的管理你的python依赖><i class="fab fa-threads fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/ data-hashtag><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Hacker News" data-sharer=hackernews data-url=https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/ data-title=使用uv来更好的管理你的python依赖><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/ data-title=使用uv来更好的管理你的python依赖><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@14.9.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/ data-title=使用uv来更好的管理你的python依赖 data-image="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Diaspora" data-sharer=diaspora data-url=https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/ data-title=使用uv来更好的管理你的python依赖 data-description><i class="fab fa-diaspora fa-fw" aria-hidden=true></i></a><a href="https://t.me/share/url?url=https%3a%2f%2fguzhongren.github.io%2f2025%2f06%2f%25E4%25BD%25BF%25E7%2594%25A8uv%25E6%259D%25A5%25E6%259B%25B4%25E5%25A5%25BD%25E7%259A%2584%25E7%25AE%25A1%25E7%2590%2586%25E4%25BD%25A0%25E7%259A%2584python%25E4%25BE%259D%25E8%25B5%2596%2f&amp;text=%e4%bd%bf%e7%94%a8uv%e6%9d%a5%e6%9b%b4%e5%a5%bd%e7%9a%84%e7%ae%a1%e7%90%86%e4%bd%a0%e7%9a%84python%e4%be%9d%e8%b5%96" target=_blank title="分享到 Telegram"><i class="fab fa-telegram fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/>Tags</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/ class=prev rel=prev title="基于Strapi开发Headless CMS的基建入门"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>基于Strapi开发Headless CMS的基建入门</a>
<a href=/2025/07/vibe-coding-%E4%B8%80%E4%B8%AA%E6%8F%90%E5%8D%87-code-review-comments-%E7%9A%84-vscode%E6%8F%92%E4%BB%B6/ class=next rel=next title="Vibe Coding：提升 Code Review 体验的 VSCode 插件">Vibe Coding：提升 Code Review 体验的 VSCode 插件<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=utterances class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>友情链接:<div style=display:flex;justify-content:center;align-items:center><a style="display:flex;justify-content:center;align-items:center;margin:0 1rem" href=https://yihaimen.github.io><span style=display:flex;justify-content:center;align-items:center><img style=height:24px src=https://yihaimen.github.io/images/avatar.png><span>易海门的博客</span></span></a><a style="display:flex;justify-content:center;align-items:center;margin:0 1rem" href=https://bytewars.cc><span style=display:flex;justify-content:center;align-items:center><img style=height:24px src=https://bytewars.github.io/images/avatar.png><span>ByteWars社区</span></span></a></div></div><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.140.2">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2020 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=guzhongren@live.cn target=_blank>谷中仁</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script src=https://cdn.jsdelivr.net/npm/algoliasearch@5.20.2/dist/lite/builds/browser.umd.min.js></script><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js></script><script>window.config={comment:{utterances:{darkTheme:"github-dark",issueTerm:"title",label:"utterances",lightTheme:"github-light",repo:"guzhongren/guzhongren.github.io"}},search:{algoliaAppID:"8FBSWQTAD1",algoliaIndex:"index.zh-cn",algoliaSearchKey:"f8e94db6f14a6320dcdcb4db3f7256aa",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:30,type:"algolia"},twemoji:!0}</script><script src=/js/theme.min.js></script></body></html>