<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>基于Strapi开发Headless CMS的基建入门 - 谷中仁的博客</title><meta name=Description content="最近的总结或者思考..."><meta property="og:url" content="https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/">
<meta property="og:site_name" content="谷中仁的博客"><meta property="og:title" content="基于Strapi开发Headless CMS的基建入门"><meta property="og:description" content="简介 在现代电商和企业网站中，内容需要频繁变更。理想的系统应支持后台灵活编辑内容，前端自动渲染，无需频繁重构和部署。以电商为例，产品信息、价格、描述等常常调整，页面布局也需随时优化。对于缺乏开发经验的运营人员，易用的 CMS 能极大提升效率和响应速度。"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-16T10:15:31+08:00"><meta property="article:modified_time" content="2025-05-16T10:15:31+08:00"><meta property="article:tag" content="Strapi"><meta property="article:tag" content="Headless"><meta property="article:tag" content="CMS"><meta property="article:tag" content="API"><meta property="og:image" content="https://guzhongren.github.io/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://guzhongren.github.io/"><meta name=twitter:title content="基于Strapi开发Headless CMS的基建入门"><meta name=twitter:description content="简介 在现代电商和企业网站中，内容需要频繁变更。理想的系统应支持后台灵活编辑内容，前端自动渲染，无需频繁重构和部署。以电商为例，产品信息、价格、描述等常常调整，页面布局也需随时优化。对于缺乏开发经验的运营人员，易用的 CMS 能极大提升效率和响应速度。"><meta name=application-name content="谷中仁的博客"><meta name=apple-mobile-web-app-title content="谷中仁的博客"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/><link rel=prev href=https://guzhongren.github.io/2025/04/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E8%B7%A8%E5%8A%9F%E8%83%BD%E6%80%A7%E9%9C%80%E6%B1%82rfc/><link rel=next href=https://guzhongren.github.io/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"基于Strapi开发Headless CMS的基建入门","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/guzhongren.github.io\/2025\/05\/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8\/"},"image":["https:\/\/guzhongren.github.io\/images\/avatar.png"],"genre":"posts","keywords":"Strapi, Headless, CMS, API","wordcount":1832,"url":"https:\/\/guzhongren.github.io\/2025\/05\/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8\/","datePublished":"2025-05-16T10:15:31+08:00","dateModified":"2025-05-16T10:15:31+08:00","license":"Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"guzhongren","logo":"https:\/\/guzhongren.github.io\/logo.png"},"author":{"@type":"Person","name":"谷中仁"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>const query=window.matchMedia("(prefers-color-scheme: dark)");function applyTheme(){let e=window.localStorage?.getItem("theme")||"auto",t=e==="dark"||e==="auto"&&query.matches;document.body.setAttribute("theme",t?"dark":"light"),document.body.setAttribute("cfg-theme",e)}applyTheme(),query.addEventListener("change",applyTheme)</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=谷中仁的博客><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/avatar.svg data-srcset="/images/avatar.svg, /images/avatar.svg 1.5x, /images/avatar.svg 2x" data-sizes=auto alt=/images/avatar.svg title=/images/avatar.svg>谷中仁的博客</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/ title=Tags>Tags </a><a class=menu-item href=/categories/ title=Categories>Categories </a><a class=menu-item href=/slides/ title=Slides>Slides </a><a class=menu-item href="https://www.figma.com/file/7EzjLtMRXKcaJrGEmudLwC/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1?node-id=0%3A1" title=知识图谱 rel="noopener noreffer" target=_blank>知识图谱 </a><a class=menu-item href=/about/ title=关于>关于 </a><a class=menu-item href=https://github.com/guzhongren title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i> GitHub </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=谷中仁的博客><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/avatar.svg data-srcset="/images/avatar.svg, /images/avatar.svg 1.5x, /images/avatar.svg 2x" data-sizes=auto alt=/images/avatar.svg title=/images/avatar.svg>谷中仁的博客</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title=Tags>Tags</a><a class=menu-item href=/categories/ title=Categories>Categories</a><a class=menu-item href=/slides/ title=Slides>Slides</a><a class=menu-item href="https://www.figma.com/file/7EzjLtMRXKcaJrGEmudLwC/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1?node-id=0%3A1" title=知识图谱 rel="noopener noreffer" target=_blank>知识图谱</a><a class=menu-item href=/about/ title=关于>关于</a><a class=menu-item href=https://github.com/guzhongren title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i>GitHub</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">基于Strapi开发Headless CMS的基建入门</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://guzhongren.github.io title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>谷中仁</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/summary/><i class="far fa-folder fa-fw" aria-hidden=true></i>Summary</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2025-05-16>2025-05-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 1832 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 4 分钟&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80" data-srcset="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80, https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80 1.5x, https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80 2x" data-sizes=auto alt="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80" title="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80"></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#简介>简介</a></li><li><a href=#strapi简介>Strapi简介</a></li><li><a href=#主要流程>主要流程</a></li><li><a href=#主要概念>主要概念</a><ul><li><a href=#content-types-builder>Content Types Builder</a></li><li><a href=#components>Components</a></li><li><a href=#single-types>Single Types</a></li><li><a href=#collections>Collections</a></li><li><a href=#dynamic-zones>Dynamic Zones</a></li><li><a href=#api>API</a></li><li><a href=#plugins>Plugins</a></li></ul></li><li><a href=#进阶>进阶</a><ul><li><a href=#将请求参数置于-strapi-middlewarehttpsdocsstrapiiocmsbackend-customizationmiddlewares-中>将请求参数置于 <a href=https://docs.strapi.io/cms/backend-customization/middlewares>Strapi Middleware</a> 中</a></li><li><a href=#前端动态渲染-dynamic-zone-组件>前端动态渲染 Dynamic Zone 组件</a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></div></div><div class=content id=content><h2 id=简介>简介</h2><p>在现代电商和企业网站中，内容需要频繁变更。理想的系统应支持后台灵活编辑内容，前端自动渲染，无需频繁重构和部署。以电商为例，产品信息、价格、描述等常常调整，页面布局也需随时优化。对于缺乏开发经验的运营人员，易用的 CMS 能极大提升效率和响应速度。</p><h2 id=strapi简介>Strapi简介</h2><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>Tips<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><a href=https://strapi.io/>Strapi</a><sup>[3]</sup>
是一个 API 级低代码内容管理系统（Headless CMS）。</div></div></div><p>Strapi 是开源、灵活的 Headless CMS，支持多数据库和多前端框架。它提供内容建模、权限管理、插件扩展等能力，适合各种规模项目。前后端分离架构让前端可用 React/Vue/Angular 等技术开发，后端通过 Strapi API 提供数据，提升开发效率、降低维护成本。</p><p>主要特性包括：</p><ul><li><strong>开源</strong>，可自由使用和定制</li><li><strong>灵活内容建模</strong>，支持多数据类型和关系</li><li><strong>自动生成 RESTful/GraphQL API</strong></li><li><strong>插件机制</strong>，可扩展功能和集成第三方服务</li><li><strong>多数据库支持</strong>（MongoDB、PostgreSQL、MySQL 等）</li><li><strong>权限管理</strong>，细粒度控制访问</li><li><strong>多语言内容管理</strong></li><li><strong>活跃社区与丰富文档</strong></li></ul><h2 id=主要流程>主要流程</h2><p><img src=https://cdn.jsdelivr.net/gh/guzhongren/picx-images-hosting@master/How-to/Strapi/dev-with-strapi.2ks52vmd6j.webp alt=dev-with-strapi></p><ol><li>设计内容模型（Content Types/Components）<ul><li>使用内容类型构建器（Content-Type Builder）将页面的内容抽象出来，形成如 Design Token 级别的组件，和可复用的中度复杂的组件。</li></ul></li><li>创建网站结构及内容<ul><li>构建网站结构，可通过组合之前创建的各种组件来形成结构。</li><li>创建网站的具体内容，如文章、产品、用户等，并使他们关联起来，比如博客需要有作者、分类、标签等。</li></ul></li><li>配置 API 权限与插件<ul><li>配置 API 的权限，决定哪些用户可以访问、修改、删除内容，一般情况会将所有的内容以只读的方式暴露给前端。</li></ul></li><li>通过 API 管理和获取内容<ul><li>前端通过 Strapi 提供的 RESTful， StrapiClient 或 GraphQL API 获取内容。</li></ul></li><li>前端动态渲染内容<ul><li>前端根据内容类型和结构动态渲染页面。</li></ul></li></ol><h2 id=主要概念>主要概念</h2><h3 id=content-types-builder>Content Types Builder</h3><p>内容类型构建器是 Strapi 的核心，可视化创建和管理内容类型。支持灵活定义字段、数据类型、验证规则，便于内容建模和结构调整。</p><h3 id=components>Components</h3><p>组件实现内容结构复用。可将常用结构（如作者信息、SEO 配置等）封装为组件，在多个内容类型中引用，支持嵌套组合，提升建模灵活性。</p><h3 id=single-types>Single Types</h3><p>单一类型（Single Type）适合全站唯一内容，如“关于我们”、“站点设置”等。每种单一类型仅有一个条目，结构可自定义，便于集中管理全局内容。</p><h3 id=collections>Collections</h3><p>集合类型（Collection Type）用于管理多条同类内容，如文章、产品、用户等。每个集合类型可包含多个字段和组件，是内容批量管理和 API 构建的基础。</p><h3 id=dynamic-zones>Dynamic Zones</h3><p>动态区域（Dynamic Zone）允许在单字段中组合多种组件，实现内容结构高度自定义。适用于富文本、页面构建器等场景，支持多类型组件共存和嵌套。</p><h3 id=api>API</h3><p>Strapi 自动为每个内容类型生成 RESTful 或 GraphQL API，支持内容的增删改查，便于前后端分离和多端接入。</p><h3 id=plugins>Plugins</h3><p>插件用于扩展 Strapi 功能，如权限管理、内容版本控制、第三方集成等。官方和社区插件丰富，也支持自定义开发。</p><h2 id=进阶>进阶</h2><p>使用Strapi API 时有时需要对请求参数进行预处理，比如验证、转换等。可以通过中间件（Middleware）来实现。</p><h3 id=将请求参数置于-strapi-middlewarehttpsdocsstrapiiocmsbackend-customizationmiddlewares-中>将请求参数置于 <a href=https://docs.strapi.io/cms/backend-customization/middlewares>Strapi Middleware</a><sup>[1]</sup>
中</h3><p>如果要获取一个 Global Page的内容，普通情况下，我们会把查询参数放在URL 的query中，比如：</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><pre tabindex=0><code>http://localhost:1337/api/global?populate[header][populate][0]=navItems&amp;populate[footer][populate][0]=socialLinks.Link</code></pre></div><p>通常情况呢，这个 url 的请求参数一般不会改变，每次都要返回Global Page 的所有内容，那么我们就可以把这个请求参数放在中间件中，避免每次都要在 URL 中传递。我们在请求时直接使用url <code>http://localhost:1337/api/global</code> 即可，而不用带query参数。
这样做的好处是：</p><ol><li>代码可读性更高</li><li>减少了 URL 的复杂度</li><li>方便后期维护和修改</li></ol><p>可通过中间件（Middleware）统一处理请求参数。基本步骤：</p><ol><li>可使用 <a href=https://docs.strapi.io/cms/cli#strapi-generate>strapi generate:middleware</a><sup>[2]</sup>
命令生成中间件<div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-sh"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>pnpm run strapi generate
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&gt; my-strapi-project@0.1.0 strapi ~/01.Personal/tmp/my-strapi-project
</span></span><span class=line><span class=cl>&gt; strapi <span class=s2>&#34;generate&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>? Strapi Generators middleware - Generate a middleware <span class=k>for</span> an API
</span></span><span class=line><span class=cl>? Middleware name global-page-populate
</span></span><span class=line><span class=cl>? Where <span class=k>do</span> you want to add this middleware? Add middleware to an existing API
</span></span><span class=line><span class=cl>? Which API is this <span class=k>for</span>? global
</span></span><span class=line><span class=cl>✔  ++ /api/global/middlewares/global-page-populate.ts</span></span></code></pre></div></div></li><li>定义中间件函数并处理 <code>ctx.query</code><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl> <span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span> <span class=nx>Core</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@strapi/strapi&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kr>const</span> <span class=nx>populate</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=nx>header</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=nx>populate</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;navItems&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>   <span class=p>},</span>
</span></span><span class=line><span class=cl>   <span class=nx>banner</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nx>footer</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=nx>populate</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;logo&#34;</span><span class=p>,</span> <span class=s2>&#34;navItems&#34;</span><span class=p>,</span> <span class=s2>&#34;socialLinks&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=c1>// 获取 dynamic zone 的内容
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// const populate = {
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//   blocks: {
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//     on: {
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//       &#34;blocks.hero&#34;: {
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//         populate: {
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//           links: true,
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//           image: {
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//             fields: [&#34;url&#34;, &#34;name&#34;]
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//           }
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//         },
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//       },
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//       &#34;blocks.heading-section&#34;: {
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//         populate: &#39;*&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//       }
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//     }
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//   }
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl> <span class=kr>export</span> <span class=k>default</span> <span class=p>(</span><span class=nx>config</span><span class=p>,</span> <span class=p>{</span> <span class=nx>strapi</span> <span class=p>}</span><span class=o>:</span> <span class=p>{</span> <span class=nx>strapi</span>: <span class=kt>Core.Strapi</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=k>return</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=nx>ctx</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>populate</span> <span class=o>=</span> <span class=nx>populate</span><span class=p>;</span>
</span></span><span class=line><span class=cl>     <span class=nx>strapi</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;In global-page-populate middleware.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>     <span class=k>await</span> <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=p>};</span>
</span></span><span class=line><span class=cl> <span class=p>};</span></span></span></code></pre></div></div></li><li>在 <code>src/api/global/routes/global.ts</code> 注册中间件<div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl>  <span class=kr>import</span> <span class=p>{</span> <span class=nx>factories</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@strapi/strapi&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>export</span> <span class=k>default</span> <span class=nx>factories</span><span class=p>.</span><span class=nx>createCoreRouter</span><span class=p>(</span><span class=s1>&#39;api::global.global&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>config</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>find</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>middlewares</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;api::global.global-page-populate&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span></span></span></code></pre></div></div></li><li>使用API 请求测试等工具测试<div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-sh"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl <span class=s1>&#39;http://localhost:1337/api/global&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># 应该返回Global Page 的所有内容</span></span></span></code></pre></div></div></li></ol><h3 id=前端动态渲染-dynamic-zone-组件>前端动态渲染 Dynamic Zone 组件</h3><p>前端可根据后端返回的 Dynamic Zone 数据动态渲染组件，为代码如下：</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-tsx"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>componentMap</span>: <span class=kt>Record</span><span class=p>&lt;</span><span class=nt>ComponentType</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;blocks.hero&#34;</span><span class=o>:</span> <span class=nx>Hero</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;blocks.heading-section&#34;</span><span class=o>:</span> <span class=nx>HeadingSection</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;blocks.card-grid&#34;</span><span class=o>:</span> <span class=nx>CardGrid</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;blocks.content-with-image&#34;</span><span class=o>:</span> <span class=nx>ContentWithImage</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;blocks.faqs&#34;</span><span class=o>:</span> <span class=nx>Faqs</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;blocks.person-card&#34;</span><span class=o>:</span> <span class=nx>PersonCard</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;blocks.markdown&#34;</span><span class=o>:</span> <span class=nx>Markdown</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;blocks.featured-articles&#34;</span><span class=o>:</span> <span class=nx>FeaturedArticles</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;blocks.newsletter&#34;</span><span class=o>:</span> <span class=nx>Newsletter</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>blocksFromAPI</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>block</span>: <span class=kt>BlockData</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>Component</span> <span class=o>=</span> <span class=nx>componentMap</span><span class=p>[</span><span class=nx>block</span><span class=p>.</span><span class=nx>__component</span><span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>Component</span> <span class=o>?</span> <span class=p>&lt;</span><span class=nt>Component</span> <span class=na>data</span><span class=o>=</span><span class=p>{</span><span class=nx>block</span><span class=p>}</span> <span class=p>/&gt;</span> <span class=o>:</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span></span></span></code></pre></div></div><h2 id=总结>总结</h2><p>Strapi 是一个强大的 Headless CMS，适合快速构建和管理内容驱动的应用。通过灵活的内容建模、API 生成和插件扩展，Strapi 能满足各种项目需求。本文介绍了 Strapi 的基本概念、主要流程和进阶用法，希望能帮助你快速上手。</p></div><div class=references><h2>参考</h2><ol><li>Strapi Middleware: <a href=https://docs.strapi.io/cms/backend-customization/middlewares target=_blank rel="noopener noreferrer">https://docs.strapi.io/cms/backend-customization/middlewares</a></li><li>strapi generate:middleware: <a href=https://docs.strapi.io/cms/cli#strapi-generate target=_blank rel="noopener noreferrer">https://docs.strapi.io/cms/cli#strapi-generate</a></li><li>Strapi: <a href=https://strapi.io/ target=_blank rel="noopener noreferrer">https://strapi.io/</a></li></ol></div><div class=disclaimer><h2>免责声明</h2><p>本文仅代表个人观点，与本人所供职的公司无任何关系。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2025-05-16</span></div><div class=post-info-license><span><a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc/4.0/80x15.png></a></span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 X" data-sharer=x data-url=https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/ data-title="基于Strapi开发Headless CMS的基建入门" data-via=guzhongren data-hashtags=Strapi,Headless,CMS,API><i class="fab fa-x-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Threads" data-sharer=threads data-url=https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/ data-title="基于Strapi开发Headless CMS的基建入门"><i class="fab fa-threads fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/ data-hashtag=Strapi><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Hacker News" data-sharer=hackernews data-url=https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/ data-title="基于Strapi开发Headless CMS的基建入门"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/ data-title="基于Strapi开发Headless CMS的基建入门"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@15.14.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/ data-title="基于Strapi开发Headless CMS的基建入门" data-image="https://images.unsplash.com/photo-1671227498016-93aa927686f8?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1074&amp;q=80"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Diaspora" data-sharer=diaspora data-url=https://guzhongren.github.io/2025/05/%E5%9F%BA%E4%BA%8Estrapi%E5%BC%80%E5%8F%91headless-cms%E7%9A%84%E5%9F%BA%E5%BB%BA%E5%85%A5%E9%97%A8/ data-title="基于Strapi开发Headless CMS的基建入门" data-description><i class="fab fa-diaspora fa-fw" aria-hidden=true></i></a><a href="https://t.me/share/url?url=https%3a%2f%2fguzhongren.github.io%2f2025%2f05%2f%25E5%259F%25BA%25E4%25BA%258Estrapi%25E5%25BC%2580%25E5%258F%2591headless-cms%25E7%259A%2584%25E5%259F%25BA%25E5%25BB%25BA%25E5%2585%25A5%25E9%2597%25A8%2f&amp;text=%e5%9f%ba%e4%ba%8eStrapi%e5%bc%80%e5%8f%91Headless%20CMS%e7%9a%84%e5%9f%ba%e5%bb%ba%e5%85%a5%e9%97%a8" target=_blank title="分享到 Telegram"><i class="fab fa-telegram fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/strapi/>Strapi</a>,&nbsp;<a href=/tags/headless/>Headless</a>,&nbsp;<a href=/tags/cms/>CMS</a>,&nbsp;<a href=/tags/api/>API</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2025/04/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E8%B7%A8%E5%8A%9F%E8%83%BD%E6%80%A7%E9%9C%80%E6%B1%82rfc/ class=prev rel=prev title=软件开发中的跨功能性需求（RFC）><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>软件开发中的跨功能性需求（RFC）</a>
<a href=/2025/06/%E4%BD%BF%E7%94%A8uv%E6%9D%A5%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84python%E4%BE%9D%E8%B5%96/ class=next rel=next title=使用uv来更好的管理你的python依赖>使用uv来更好的管理你的python依赖<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=utterances class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>友情链接:<div style=display:flex;justify-content:center;align-items:center><a style="display:flex;justify-content:center;align-items:center;margin:0 1rem" href=https://yihaimen.github.io><span style=display:flex;justify-content:center;align-items:center><img style=height:24px src=https://yihaimen.github.io/images/avatar.png><span>易海门的博客</span></span></a><a style="display:flex;justify-content:center;align-items:center;margin:0 1rem" href=https://bytewars.cc><span style=display:flex;justify-content:center;align-items:center><img style=height:24px src=https://bytewars.github.io/images/avatar.png><span>ByteWars社区</span></span></a></div></div><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.140.2">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2020 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=guzhongren@live.cn target=_blank>谷中仁</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script src=https://cdn.jsdelivr.net/npm/algoliasearch@5.20.2/dist/lite/builds/browser.umd.min.js></script><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js></script><script>window.config={comment:{utterances:{darkTheme:"github-dark",issueTerm:"title",label:"utterances",lightTheme:"github-light",repo:"guzhongren/guzhongren.github.io"}},search:{algoliaAppID:"8FBSWQTAD1",algoliaIndex:"index.zh-cn",algoliaSearchKey:"f8e94db6f14a6320dcdcb4db3f7256aa",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:30,type:"algolia"},twemoji:!0}</script><script src=/js/theme.min.js></script></body></html>