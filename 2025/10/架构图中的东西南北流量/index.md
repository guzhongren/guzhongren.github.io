# 架构图中的东西南北流量

## 在线制图工具的流行

> 从前车马，邮件都很慢，一生只能够爱一个人。从前爱情很慢，遇到一个人便是一生一世，认定一个人便是白头到老。

在计算机领域，从前，我们看到的图大都是规范化的，因为大家都是遵循相同的制图标准，大家可以去网上搜索一下“教科书 纯手绘” 这样的关键字，可以看到老一辈纯手绘的教科书或者工程用图。

随着技术的进步，现在企业都在采用大型的画布应用作为公司可视化交流的应用，根据我的了解，[Miro](https://miro.com/)、[Figma](https://www.figma.com/)、[Mural](https://www.mural.co/) 都是非常著名的工具，当然也有集成 [Excalidraw](hbttps://excalidraw.com)、[Tldraw](https://www.tldraw.com/) 和 [Processon](https://www.processon.com/) 等的工具。但这些都只是工具，至于用它画出来的图能否让别人清晰的理解你的意思还是取决于制图者。这里就需要谈到制图的标准化。

## 非标准化的制图问题

作为新人或者不熟悉画图流程或没有丰富经验的制图者，往往会犯错, 比如图标是否使用合适，顺序是否正确或者调用顺序是否正确...

在程序开发过程中，我们通常会用到序列图、活动图、用例图、对象图、部署图或状态图等等的，如果制作不标准的图，让别人理解你的意图就会非常困难，甚至出现严重的生产事故。

在制作计算机系统架构图的时候，我们尤其要注意谁是调用者，谁是被调用者，谁是第三方，该处于系统架构图的什么位置...


## 标准化：东西流量，南北流量

### 东西、南北流量的由来

这种叫法源于绘制网络架构图的惯例。通常，架构图的顶部（North）代表外部互联网或客户端，底部（South）代表核心服务器区。因此，从外到内（或从内到外）的垂直流量被称为“南北”流量。而系统内部，处于同一层的服务之间是水平排列的，就像地图上的左右方向（左西West，右东East），它们之间的流量自然就被称为“东西”流量。

### 关注点

由于东西流量和南北流量性质不同，在架构设计时的关注点和实践也有所侧重。

东西流量的核心关注点：由于直接影响系统内部组件的协作效率，东西流量的优化首要目标是低延迟和低抖动（延迟的波动性），以确保服务间调用的稳定性和快速响应。在高性能计算（如AI训练集群）中，GPU服务器之间同步模型参数的东西流量对网络延迟极其敏感，直接决定了训练效率。

南北流量的核心关注点：作为系统的对外关口，南北流量的设计更侧重于安全防护（如防火墙、WAF）、访问控制、限流熔断，以及应对高并发用户访问的带宽保障

## 对比

| 特征维度 | 东西流量 (East-West Traffic) | 南北流量 (North-South Traffic) |
| :--- | :--- | :--- |
| **流向角色** | 服务端 ↔ 服务端 (Server-Server) | 客户端 ↔ 服务端 (Client-Server) |
| **流动范围** | 系统或数据中心**内部** | 系统或数据中心**外部与内部之间** |
| **典型示例** | 微服务A调用微服务B、应用服务器读写数据库、虚拟机迁移 | 用户通过浏览器访问网站API、手机App从服务器获取数据 |
| **关注重点** | **延迟**、**抖动**、内部带宽、服务发现与治理 | 带宽、安全策略、接入速率、对外服务质量 (QoS) |
| **直观比喻** | 办公楼内各部门之间的**走廊与电梯**，日常协作频繁 | 连接办公楼与外部世界的**大门与主干道**，是内外交互的通道 |

简单来说，你可以将东西流量理解为系统内部的“血液循环”，负责各个器官（微服务、数据库等）之间的协作；而南北流量则是与外部环境进行“呼吸”的通道。理解这一概念，对于设计高性能、可扩展的分布式系统至关重要。

## 架构图案例


## 总结

